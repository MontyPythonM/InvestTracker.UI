<div class="container" *ngIf="user">
  <div class="buttons-bar">
    <button mat-mini-fab color="secondary" routerLink="/users">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <div>
      <button mat-raised-button color="primary" class="button block-button" (click)="revokeUserRefreshToken()">
        <mat-icon>person_off</mat-icon>
        <span>Revoke token</span>
      </button>
      <button *ngIf="user.isActive" mat-raised-button color="primary" class="button block-button" [disabled]="isCurrentUserAccount || !isSystemAdministrator" (click)="blockUser()">
        <mat-icon>key_off</mat-icon>
        <span>Block</span>
      </button>
      <button *ngIf="!user.isActive" mat-raised-button color="secondary" class="button" [disabled]="isCurrentUserAccount || !isSystemAdministrator" (click)="unblockUser()">
        <mat-icon>key_on</mat-icon>
        <span>Unblock</span>
      </button>
    </div>
  </div>
  <div class="section">
    <h2 class="title">Account details</h2>
    <app-property-grid [fields]="accountFields"></app-property-grid>
  </div>
  <div class="section">
    <h2 class="title edit">
      Role
      <button mat-mini-fab color="primary" class="section-button" [disabled]="!isSystemAdministrator" (click)="openSetRoleDialog()">
        <mat-icon>edit</mat-icon>
      </button>
  </h2>
    <app-property-grid [fields]="roleFields"></app-property-grid>
  </div>
  <div class="section">
    <h2 class="title edit">
      Subscription
      <button mat-mini-fab color="primary" class="section-button" (click)="openSetSubscriptionDialog()">
        <mat-icon>edit</mat-icon>
      </button>
    </h2>
    <app-property-grid [fields]="subscriptionFields"></app-property-grid>
  </div>
  <div class="section" *ngIf="advisor">
    <h2 class="title edit">
      Advisor profile
      <button mat-mini-fab color="primary" class="section-button" (click)="openUpdateAdvisorDialog()">
        <mat-icon>edit</mat-icon>
      </button>
    </h2>
    <app-property-grid [fields]="advisorFields"></app-property-grid>
  </div>
</div>
<app-spinner [isVisible]="!user"></app-spinner>
